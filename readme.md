# LanShare —— 局域网文件传输工具

## 一、项目概述

**LanShare** 是一个基于 **Java + JavaFX** 实现的局域网文件传输工具，支持在同一局域网内自动发现设备，并进行点对点文件传输。传输速度极快，可达 60MB/s。使学生和科研人员从某网盘中解放出来。项目以课程大作业为目标，强调**网络通信原理、面向对象设计与工程完整性**，未依赖现成的开源快传框架，核心功能均为自主实现。

---

## 二、功能特性

- **局域网设备发现**：基于 UDP 广播，实现设备上线/下线的自动感知
- **设备列表管理**：实时展示当前可连接设备
- **文件发送与接收**：基于 TCP 的可靠传输
- **接收确认机制**：接收端可选择是否接受文件
- **文件分片传输**：支持大文件稳定传输，目前测试可传输 5G 以上的大文件。
- **传输进度显示**：实时进度条与百分比展示
- **完整性校验**：传输完成后进行 MD5 校验
- **日志系统**：关键事件与异常信息可追踪
- **图形化界面**：使用 JavaFX + FXML 实现

---

## 三、技术选型

- **开发语言**：Java 17+
- **界面框架**：JavaFX 23（FXML + Controller）
- **网络通信**：

  - UDP：设备发现与广播
  - TCP：文件传输与控制消息

- **数据序列化**：Gson（JSON）
- **并发模型**：线程池（ExecutorService）

---

## 四、系统设计

### 1. 整体架构

```
UI 层（JavaFX）
    ↓
业务控制层
（设备发现 / 文件传输 / 任务调度）
    ↓
网络通信层
（UDP 广播 + TCP Socket + 自定义协议）
```

### 2. 模块划分

| 模块                | 说明                               |
| ------------------- | ---------------------------------- |
| `network.discovery` | 设备发现与注册管理                 |
| `network.protocol`  | 自定义传输协议（请求、响应、分片） |
| `network.transfer`  | 文件传输服务与任务管理             |
| `network.config`    | 网络参数与端口配置                 |
| `test.ui`           | JavaFX 控制器与界面逻辑            |

---

## 五、项目结构

```
LanShare/
├─ src/
│  └─ main/
│     ├─ java/
│     │  └─ com/
│     │     └─ lanshare/
│     │        ├─ network/              # 网络核心模块
│     │        │  ├─ config/             # 网络配置（端口、超时等）
│     │        │  ├─ discovery/          # 设备发现（UDP 广播、心跳）
│     │        │  ├─ model/              # 数据模型（设备信息、状态等）
│     │        │  ├─ protocol/           # 通信协议（JSON 消息、枚举）
│     │        │  └─ transfer/           # 文件传输（TCP、多线程）
│     │        └─ test/
│     │           └─ ui/                 # UI 测试与启动入口
│     └─ resources/
│        └─ ui/                          # JavaFX 界面资源
│           ├─ transfer_discovery.fxml  # 主界面布局
│           └─ theme.css                # 界面样式
│
├─ target/
│  ├─ classes/                          # 编译后的 class 文件
│  ├─ dependency/                       # 运行依赖（JavaFX、Gson 等）
│  └─ test-classes/                     # 测试类编译结果
│
├─ LanShare.jar                         # 可执行 JAR 包
├─ run.bat                              # 启动脚本（隐藏控制台）
├─ LanShare.ico                         # 程序图标
└─ README.md                            # 项目说明文档

```

---

## 六、运行说明

### 方式一：脚本启动（推荐）

1. 确保 `LanShare.jar`、`run.bat`、`target/dependency` 位于同一目录
2. 双击 **run.bat** 或其快捷方式，快捷方式可被拖到桌面
3. 程序以图形界面方式启动，无命令行窗口

---

### 方式二：命令行启动（调试用）

```bash
java \
  --module-path target\dependency \
  --add-modules javafx.controls,javafx.fxml \
  --enable-native-access=javafx.graphics \
  -cp "LanShare.jar;target\dependency\*" \
  com.lanshare.test.TransferDiscoveryFX
```

---

## 七、使用流程

1. 启动程序后，点击 **启动发现**
2. 等待局域网内设备出现在列表中
3. 选择目标设备
4. 点击 **选择文件**
5. 点击 **发送到选中设备**
6. 接收端确认后开始传输

---

## 八、项目亮点

- 完整实现 UDP + TCP 混合通信模型
- 自定义协议设计，结构清晰、易扩展
- 界面与逻辑分离，符合 MVC 思想
- 注重异常处理与日志输出
- 具备实际可用性，而非仅演示性质

---

## 九、可拓展方向

- 传输加密（AES / TLS）
- 文件夹与批量传输
- 传输速率统计与图表展示
- 跨网段中继支持
- 跨平台（Android、ios 系统）

---

## 十、说明

本项目为 **Java 面向对象课程大作业**，由三人团队独立完成，主要目的在于综合运用 Java 网络编程、并发编程与图形界面开发相关知识。

## 十一、AI 工具使用

- 本项目由团队分工协作完成。为提升代码可读性与理解效率，在不影响程序逻辑的前提下，对部分源码借助大语言模型辅助补充了注释说明。
- 在个别模块的开发过程中，使用 Codex、Trae 等工具进行辅助编码与代码结构优化，主要用于减少重复性劳动与提升开发效率。
- 项目过程中使用的大语言模型包括：Gemini 3.0 Pro、ChatGPT 5.2、Claude 4.5 Sonnet
- 所有核心设计、功能实现与最终代码均由项目成员理解、验证并完成，AI 工具仅作为辅助开发与学习参考工具

## 十二、致谢

- 本项目由北京航空航天大学软件工程专业三名大二本科生合作完成，作为《面向对象程序设计》课程的大作业成果。

- 受限于课程周期与团队成员精力，项目在功能完整性、健壮性与细节优化方面仍存在不足，部分场景下可能存在缺陷或未覆盖情况。

- 尽管如此，团队成员已在既定时间内完成了系统设计、功能实现与测试工作，并对项目整体运行效果负责。

- 后续如有时间与条件，团队将继续对项目进行功能扩展与性能优化
